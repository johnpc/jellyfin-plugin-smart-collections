<!doctype html>
<html>
  <head>
    <title>Smart Collections</title>
  </head>

  <body>
    <div
      data-role="page"
      class="page type-interior pluginConfigurationPage tbsConfigurationPage"
      data-require="emby-input,emby-button"
    >
      <div data-role="content">
        <div class="content-primary">
          <form class="tbsConfigurationPage">
            <div class="sectionTitleContainer flex align-items-center">
              <h2 class="sectionTitle">Smart Collections</h2>
              <a
                is="emby-linkbutton"
                class="raised button-alt headerHelpButton emby-button"
                target="_blank"
                href="https://github.com/johnpc/jellyfin-plugin-smart-collections"
                >Help</a
              >
            </div>
            <div class="verticalSection">
              <p>
                Make sure you've configured your Tags in the settings for this plugin!
              </p>
              <br />
            </div>
            <br />
            <button
              is="emby-button"
              type="button"
              class="raised block"
              id="sync-smart-collections"
              onclick="execute()"
            >
              <span>Sync Smart Collections for Tags</span>
            </button>
          </form>
        </div>
      </div>

      <script type="text/javascript">
        function execute() {
          var request = {
            url: ApiClient.getUrl("/SmartCollections/SmartCollections"),
            type: "POST",
          };

          ApiClient.fetch(request)
            .then(function () {
              Dashboard.alert("Executing Smart Collections...");
            })
            .catch(function () {
              Dashboard.alert({
                message: "Unexpected error occurred!",
              });
            });
        }
      </script>
    </div>
  </body>
</html>
